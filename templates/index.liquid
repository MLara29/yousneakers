{{ content_for_index }}

{%- comment -%}
  Floating video sphere on homepage: collect product videos and cycle through
{%- endcomment -%}
<div id="index-video-seq" style="display:none">
  {%- assign sourceCollection = collections.all -%}
  {%- if sourceCollection and sourceCollection.products.size > 0 -%}
    {%- for product in sourceCollection.products limit: 50 -%}
      {%- for media in product.media -%}
        {%- if media.media_type == 'video' -%}
          <div class="seq-item">{{ media | video_tag: image_size: '600x', autoplay: false, loop: false, muted: true, controls: false, playsinline: true }}</div>
          {%- break -%}
        {%- elsif media.media_type == 'external_video' -%}
          <div class="seq-item">{{ media | external_video_tag: image_size: '600x', autoplay: true, loop: false, muted: true, controls: false }}</div>
          {%- break -%}
        {%- endif -%}
      {%- endfor -%}
    {%- endfor -%}
  {%- endif -%}
</div>
